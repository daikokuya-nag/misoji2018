/*************************プロファイル表示順出力 Version 1.02016 Mar. 3 ver 1.0*************************//********************セッション状態の取得********************/function updProfSeqPre() {var sess;	$.ajax({		type  : "get" ,		url   : "cgi/ajax/getSess.php" ,		cache : false ,		success : function(result) {					console.debug(result);			sess = result;		} ,		error : function(result) {					console.debug('error at updProfSeqPre:' + result);		} ,		complete : function(result) {			if(sess == SESS_OWN_INTIME) {				writeProfSeqPreA(sess);			} else {				alert('長時間操作がなかったため接続が切れました。ログインしなおしてください。');				$("#editProfDlg").dialog("close");				location.href = 'login.html';			}		}	});}/********************セッション情報の更新********************/function writeProfSeqPreA(sess) {var ret;	$.ajax({		type  : "get" ,		url   : "cgi/ajax/updSess.php" ,		cache : false ,		success : function(result) {					console.debug(result);			ret = result;		} ,		error : function(result) {					console.debug('error at writeProfSeqPreA:' + result);		} ,		complete : function(result) {			writeProfSeqDisp();		}	});}/********************表示順を出力********************/function writeProfSeqDisp() {var groupNo  = $('#groupNo').val();var branchNo = $('#branchNo').val();var dispSW = $(".dispProfSW").serialize();var sendData = dispSW;var bld = AL + ',' + RE;	sendData = sendData + '&groupNo=' + groupNo + '&branchNo=' + branchNo;	if(profOrder.length >= 1) {		sendData = sendData + '&' + profOrder;	}console.debug('sendData::' + sendData);				//console.debug(dispSW);				console.debug('profOrder::' + profOrder);	$.ajax({		type : "post" ,		url  : "cgi/ajax/writeProfSeqDisp.php" ,					//		data : profOrder ,		// see commonA.js		data : {			groupNo  : groupNo  ,			branchNo : branchNo ,			dispSW   : dispSW   ,			order    : profOrder		} ,		cache    : false ,//		dataType : 'json' ,		success : function(result) {					console.debug(result);			ret = result;					//console.debug(ret['TITLE']);		} ,		error :function(result) {					console.debug('error at writeProfSeqDisp:' + result);		} ,		complete :function(result) {			bldProfHTML('');//			showProfListAll();		//リスト再表示//			bldProfListHTML(bld);//			bldProfSitemap();			alert('出力完了');		}	});}/********************リスト再表示********************/function showProfListAll() {var groupNo  = $('#groupNo').val();var branchNo = $('#branchNo').val();var profListTag;	$.ajax({		type : "get" ,		url  : "cgi/ajax/bldProfList.php" ,		data : {			groupNo  : groupNo  ,			branchNo : branchNo		} ,		cache    : false  ,		dataType : 'json' ,		success : function(result) {					console.debug(result);			profListTag = result;					//console.debug(ret['TITLE']);		} ,		error : function(result) {					console.debug('error at showList:' + result);		} ,		complete : function(result) {					//alert(newTag['data']);			/*** ニュース埋め込み用 ***/			$("#profListD").html(profListTag['news']['data']);			/*** 定型文埋め込み用 ***/			$("#profListFPD").html(profListTag['news']['data']);			/*** プロファイルリスト ***/			$("#profSeqListD").html(profListTag['prof']['data']);			$("#profSeqList").tableDnD({				onDrop: function(table, row) {									//profOrder = $.tableDnD.serialize();									//		console.debug(profOrder);									//enableWriteProfSeq();				}			});			$(".dispProfSW").toggleSwitch();		}	});}/********************アルバムHTML、JSのファイル出力********************/function bldProfListHTML(bld) {var groupNo  = $('#groupNo').val();var branchNo = $('#branchNo').val();	$.ajax({		type :"post" ,		url  :"cgi/ajax/bldProfHTML.php" ,		data : {			groupNo  : groupNo  ,			branchNo : branchNo ,			bld      : bld      ,			profDir  : ''		} ,		cache    :false ,//		dataType :'json' ,		success :function(result) {					console.debug(result);			ret = result;					//console.debug(ret['TITLE']);		} ,		error :function(result) {					console.debug('error at bldProfListHTML:' + result);		}	});}